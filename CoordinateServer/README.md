![CoordinateServer](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAooAAABQCAMAAACpkKTeAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABgUExURQAAAAAAABgZDQAAAAAAAAAAACEvOygTHAAAAAAAAAAAAAAAACyNzm2AggAAACygXNRwJxYcLH1FlRASJX5FlbspILwpHyuMzWx/glGCqQAAABETJX5GltNwKCygXbwpIMwmrHAAAAAadFJOUwDUGm0/uP4J652GLv7+VFRPp/nxpv2gq6JUYpfgOQAAC9tJREFUeNrtnemC46gRgM0VroTdSfbIONf7v2WEZFkUVCHUarvtmapf3bYOhD6KusCXy2n5/jdSLiwsTxRGkYVRZGFhFFkYRRYWRpGFUWRhGRH5T1K4c1hYWFhYWJ4h34bEckexPFjsX4aEUWRhFFkYRUaRhVF8kEjJQ+onQlHGLC/5yu31qt9xAGkVfBaVomUUh7rAJm+uN3FGRUbxvMQgrqWIEBnFPdHeXaEIZRnFU6LFtZVX69bX7DRnQtKTJOWX/4N9XRTTqysYaa6EBMnEUZ3mcwf5BD6bpxahXxXFOI2Ul1Yv2l1JceqtcfnluNjxTnPtSLUqwxheFMU0te2RysXac6Dra1fSG6P4y3+Py9irUlPPGPRQG7KytC+JovWPVS1Tr5zyV/okmgujiJOoegrT/5RuyzkUbeGwTBa4SkkFX3z2zsaifRSKqT9bRNcBlVHsje+b/kvbrCKTXz58a1PxUVoxo5b2DoiM4sGmri6Lq/tWhukr8dYkPkgr5olE7alNIxnFD/osGjPA3ZuHuR+DohqwoF+l494IxbAGEPFgyHuT+BitKN3VvU3HvBGK/gfwTjrUPCKuGN7Jgn4jFNc8y4Vl3Lp2llF8ERRjUiGotKNJ5XLUR6wmq6dTg9J2tB32tAy3LX08mWJl1PvFZDbGtHvUdJCOcv+LURSnluHXa1rWq38cQHHqA+IaK4rjwGjjtuqduvHBzBLzYfdo5fSfWj43TRPk7YviQlZtKXHTVGQsh/s1xba04/L30/LbAZPmQz6JvD+W8DQdW4EUWhrl3Rw7T7dLuepKeo0IuzUyV6EoXDmMgjPEad2WGXV7W+Z+NeFmyZcAIqg+aF/s3VYcTarUJTxVGcrtTtqWBRZyS+kkwm0SBYgwI14HmdbjY9GQCcV/n5VhFN2HIlzSw6InPCwZYV2Kie3rmlAsH92V+lq01QM1iiANFObXDm9KZAarlnm5vO07ikSuTsDwILyRbVTq7eIjU5T17c0kgiLoFFG01bQvFkbSZftQsGW3a4LEeXgiivJDSb2Un9OrPO1KPasXJO44Z6+dT9P0ZWWaSyHrgrOMop4LgrJVEpXwxfwyq1K9fDH/E0dQnLPpt5YpqmW+btmsITYUo55legANJFZ9MF1jutPaPnijLQPt9gvCLFZMBmKP68QBUCqRl2hY8+4HRKxICEzrtxMcrNh4HorpI/6zr+rt8tzSxGzzKCx10jw/VCbNhKJeGKvDbbnnyuq0WQ3rfRQ9PC1rPyEbKwppWShRHLAVAxxZ+UZVFwD95ZWWB0m8giCboUp77BVNJPqC1iVkt1eSgX1vn4ii+oBL6gE962WqF5FJrKamrIyEhVeaLHWDTGBI2jt/pPdQVI0TFpq5y7Yty3CGQyiGpg/UtYrPNiViTviAO8fbVC9M8AYjBaLoCkXoEeMhz3al01SUZkyNMNt/qovidM3noRiOx2DVFaFH1y/CYOq25sJf8eLXPIabETLB7WIfRYeEA5q4qUEOyqMkHUAxIcpWtQMNVXWtlxcra3qzQhOGotezUeAFPFsjlqqoWb9NZtG39UFFE0M2O/RsLz0PRZ+V8LHQV93j95djYFeE/Xi6x1O0ud8TCqjpo4j6qwLSrnDr2ExKaxhFPEOlKugttZpAKDzuo8AUAEy9DcVNGVtoCXjEOlBwei5mLtXkJRFvZvrjt9Py/WEoCiJPGEp8JFV6IoAW9nisg4p16nrwtyhK9KwEKBJEqP86jKLHR5CoVXygymbBIo2IZKt1rRYNYj9u3XWtppd4t/VAOyLSNluj+FUlvYdR1JSfM5kjonzOSOnUAO6eRl4ppUUbFD2OvwcHaWrOHUWRCju0faOpsFB54BoBxGZ3U6OYiFEEL1k5LQ6pzLCiOotm/TkSjqJoyDxh4QFNnWNI9ovz8YEQSa9e7qGY8FuKMtxmSHU/iiI50ESrcbXZZVFgkMUq0GrawGvNsmng1FBHSizw6SsUq0H27bSocRQPJVssnScsvtJ0LS74yqOTZceV2rMVLTFG7GW/ZWoYRUGlBRTWcpuCwUIpsXJ27QWLBUWIYiCmGjj/Jui0KHTmlRXceHnlP/51Vr6NxxUPLTxLneCPKR02kmVXdKdHVZSgzRW140FT9MuBWUCOokgPx0j3ZkzKQyJFxU1VReChrjS9VYI1pwYqXr+mEqEIOATwEfE8FOPBaohe1Hf7znRs3/I7j9pcjm7STjBHUCfJdrgM3Jd42A5we70JNi3RVYYQX7oP6aLt3ELBycqPMd07RJhtuXwVivbgKgvfOTzdH0t0som+eFoURdlR1AM56D6KvZaNxhXzTKJxcftp1OSu0CoLXVD8CIqrbZjAFT2W92lFvwiK+RHlJ6Go7yj2lEPYQzH2EkDuBVBU51Y33+sSxKehWDkurjIdxdDOAF+OojqWhP6RUfTjKDpSBopLIixD+gwUgY+s60zgm6B4cIYeQ7E3T4UfYYI+F3sToMA7nLcVoaPSLLQ+ZSuelm8H4DriQ1NeKgya9N0W0UfRdvS0PItir2WjiT99dlUDXGuwetC49SnHUCzCN7JJvqweNH4H20XxmULklHddk57G9J0nKjUm7kF3gjnpLIqdoWRHgzny7MI0B956HGJgB8XLFtRWTag6oMHr1vv/ahTzmNmN59iR17BB1gE2whC330vING09h2LqKpbBELcby9OaRBoywMNxO5QNobjhJpp8s26T1GdRlL8el32Fh1ZkVS/Tpf3AXBEt79SGgxgzjiKdEbHuLIqWbpk5kvgbMBbVulChfghRpf7MiO+9h+I9ZxPb8kWiuvYMir/+57gM9FlCarCbztNbByfK1NqGnadelgQeDY4ivd4mXM+iSLcsjpdD6JG8QCTWEmwb0Upo5zWkyCMo3h2XgFzME5UO8qMo2gehmN9wj8Vcd+cLLHHTEixNiJTygQsMCRSpANNcdncSxUipH2RPU02XPezWr9x1nwerDuW27M7UAWo4xm0A/++iuDouDpmMI7pySxrwFK+gFWdAHK36DXBsEk5Z5f0QfnlVt0qgmF9jRIeEOI0itRtGXiFQo0gaxprguaCuDNHk7c3lJFoZJIhSxMy3xTLzehtkbYvedYZQF8W0C05lQNe2fLFWXJbAEZZE3ukT6EGPsVjve5dpStgrrC7lKXhaNZ2Vsz6PIt6yrIibuCJdgoP2QW6ArfQQLQohZZrQU7QyqttPRZgjKIYryvk2n9zWo2tpt0GhXk0rLs+BrWaeV9rBpSzIMqWZ19SwqZA0RbwMoDibr7pVzsqeRxFt2Vx126JYWwqy1we5gfeesn6HRI+TQvK6j6LspR/TXoD7VbTi5VZvXP+eyLIaR2Ezdqp5VYieBIvwkfWZJIrznOXBHhszQJ+BYtuy/OwGybbMVlwqrTddsgj6oFlbm9xIEqVoEromy46jWCZVULW/MyReRSvO208uW27oeQsYGZdV9MieDsuQF7ffulp29EVMzTntb26rLZc9Perl8TSKy+9M+CUVYOfaqmznfAqKixMLWxYuGIrLfgFzI6Y2gD3J1z5YGqhDuzTm1qEoYQ0qEc0TF+tbB1BMCMF7Q6NQ7S8QVywM2ba1RtM6dOoqcXPY8N8ZWrxFNx1FbBrSQXGd4u5nzxh/DopNy5ZVTwiKtxe4HgceIFV90I7ZYh+k3nY41IwO9j4ZQHErewiU+9lb7fUC2RaAWADb6itapxY/wibIw2wqfzHQXo6guP6C0boydw3WfgqK5aZabh1uGIqT8eHI3b3SVpbtiD2sdBDNylOityL8WbvKWBpBUV37u5elag+j9PEQN/XCP3WbOzvvrZfDD7tB3Hxg2tmqz+qUr4bvarfbrHk7wHK/QXgCPJ+8Gv753LJyl0Lq/JjIPQ/twIaI0zN4M+9NJkzoH5nCfKAwvuF16C3uvuvJmjJUS45uh4jd//ch4R84ZHm02N//NyKMIgujyMIoMoosjCILo8gosjCKLD+7/DEkjCILCwsLC8uXy/c/SeHOYXkqin8lhTuHhVFkYRQZRRZGkYVRZBRZGEUWFkaR5VPl/zBI1CP6uFvoAAAAAElFTkSuQmCC)

# About

CoordinateServer is a fast, web-based tool for returning a subset of mmCIF coordinate data for a PDB entry held in the PDB archive. 
The server is able to return the specific portions of the structure that are relevant, as specified in your query. For example, 
the coordinates of the atoms within a 5Å radius around the ligand binding site, including symmetry mates.
As a result, it greatly reduces the time needed to transmit and manipulate the data.

The application is written in [TypeScript](https://www.typescriptlang.org/) on top of the
[LiteMol](https://github.com/dsehnal/LiteMol) and [CIFTools.js](https://github.com/dsehnal/CIFTools.js) libraries. 

## Running the server


### Setup

The server works on [mmCIF](http://mmcif.wwpdb.org/) files.

Edit `build/ServerConfig.js` to:
* Map to your mmCIF files.
* Setup cache.
* Setup server restarts.

### Running

The server can be run using the command

    node build/server

However, it is recommended to use a tool (such as [forever.js](https://github.com/foreverjs/forever)) that will keep the server running
in case of unexpected crashes, spawning multiple instances, etc. Search 
Google for a solution that will suit your needs the most.

## Command Line Mode

Create one or more `jobs.json` files (refer to `examplejobs.json` for the template or see below) and 
run 

    node build/local jobs.json

It is recommended that you split queries of larger data sets into jobs that contain
no more than 10000 enties.

#### Job entry template

The ``jobs.json`` file needs with specify a list of jobs using this template:

```javascript
[{
    "inputFilename": "./data/1cbs.cif",
    "outputFilename": "./result/ligandInteraction/1cbs.bcif",
    "query": "ligandInteraction", 
    "params": {
        "name": "REA",
        "atomSitesOnly": "1",
        "encoding": "bcif"
    }
},
...
]
```

The values for `query` are the same as the names of the queries in the WebAPI. The param
names in `params` are the same as well. Refer to the default page of the CoordinateServer
web for the API documentation. 

## Building

    npm install -g typescript
    tsc
